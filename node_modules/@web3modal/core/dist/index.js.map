{"version":3,"file":"index.js","sources":["../src/controllers/OptionsCtrl.ts","../src/controllers/ClientCtrl.ts","../src/controllers/AccountCtrl.ts","../src/controllers/ConfigCtrl.ts","../src/utils/ExplorerUtil.ts","../src/controllers/ExplorerCtrl.ts","../src/controllers/RouterCtrl.ts","../src/controllers/ModalCtrl.ts","../src/controllers/ThemeCtrl.ts","../src/controllers/ToastCtrl.ts","../src/utils/CoreUtil.ts","../src/utils/PolyfillUtil.ts"],"sourcesContent":["import { proxy, subscribe as valtioSub } from 'valtio/vanilla'\nimport type { OptionsCtrlState } from '../types/controllerTypes'\nimport { ClientCtrl } from './ClientCtrl'\n\n// -- initial state ------------------------------------------------ //\nconst state = proxy<OptionsCtrlState>({\n  selectedChain: undefined,\n  chains: undefined,\n  standaloneChains: undefined,\n  standaloneUri: undefined,\n  isStandalone: false,\n  isCustomDesktop: false,\n  isCustomMobile: false,\n  isDataLoaded: false,\n  isUiLoaded: false,\n  walletConnectVersion: 1\n})\n\n// -- controller --------------------------------------------------- //\nexport const OptionsCtrl = {\n  state,\n\n  subscribe(callback: (newState: OptionsCtrlState) => void) {\n    return valtioSub(state, () => callback(state))\n  },\n\n  setChains(chains?: OptionsCtrlState['chains']) {\n    state.chains = chains\n  },\n\n  setStandaloneChains(standaloneChains: OptionsCtrlState['standaloneChains']) {\n    state.standaloneChains = standaloneChains\n  },\n\n  setStandaloneUri(standaloneUri: OptionsCtrlState['standaloneUri']) {\n    state.standaloneUri = standaloneUri\n  },\n\n  getSelectedChain() {\n    const selectedChain = ClientCtrl.client().getNetwork().chain\n    if (selectedChain) {\n      state.selectedChain = selectedChain\n    }\n\n    return state.selectedChain\n  },\n\n  setSelectedChain(selectedChain: OptionsCtrlState['selectedChain']) {\n    state.selectedChain = selectedChain\n  },\n\n  setIsStandalone(isStandalone: OptionsCtrlState['isStandalone']) {\n    state.isStandalone = isStandalone\n  },\n\n  setIsCustomDesktop(isCustomDesktop: OptionsCtrlState['isCustomDesktop']) {\n    state.isCustomDesktop = isCustomDesktop\n  },\n\n  setIsCustomMobile(isCustomMobile: OptionsCtrlState['isCustomMobile']) {\n    state.isCustomMobile = isCustomMobile\n  },\n\n  setIsDataLoaded(isDataLoaded: OptionsCtrlState['isDataLoaded']) {\n    state.isDataLoaded = isDataLoaded\n  },\n\n  setIsUiLoaded(isUiLoaded: OptionsCtrlState['isUiLoaded']) {\n    state.isUiLoaded = isUiLoaded\n  },\n\n  setWalletConnectVersion(walletConnectVersion: OptionsCtrlState['walletConnectVersion']) {\n    state.walletConnectVersion = walletConnectVersion\n  }\n}\n","import { proxy } from 'valtio/vanilla'\nimport type { ClientCtrlState } from '../types/controllerTypes'\nimport { OptionsCtrl } from './OptionsCtrl'\n\n// -- initial state ------------------------------------------------ //\nconst state = proxy<ClientCtrlState>({\n  initialized: false,\n  ethereumClient: undefined\n})\n\n// -- controller -- As function to enable correct ssr handling\nexport const ClientCtrl = {\n  setEthereumClient(ethereumClient: ClientCtrlState['ethereumClient']) {\n    if (!state.initialized && ethereumClient) {\n      state.ethereumClient = ethereumClient\n      OptionsCtrl.setChains(ethereumClient.chains)\n      state.initialized = true\n    }\n  },\n\n  client() {\n    if (state.ethereumClient) {\n      return state.ethereumClient\n    }\n\n    throw new Error('ClientCtrl has no client set')\n  }\n}\n","import { proxy, subscribe as valtioSub } from 'valtio/vanilla'\nimport type { AccountCtrlState } from '../types/controllerTypes'\nimport { ClientCtrl } from './ClientCtrl'\n\n// -- initial state ------------------------------------------------ //\nconst state = proxy<AccountCtrlState>({\n  address: undefined,\n  profileName: undefined,\n  profileAvatar: undefined,\n  profileLoading: false,\n  balanceLoading: false,\n  balance: undefined,\n  isConnected: false\n})\n\n// -- controller --------------------------------------------------- //\nexport const AccountCtrl = {\n  state,\n\n  subscribe(callback: (newState: AccountCtrlState) => void) {\n    return valtioSub(state, () => callback(state))\n  },\n\n  getAccount() {\n    const account = ClientCtrl.client().getAccount()\n    state.address = account.address\n    state.isConnected = account.isConnected\n  },\n\n  async fetchProfile(\n    preloadAvatarFn: (avatar: string) => Promise<unknown>,\n    profileAddress?: `0x${string}`\n  ) {\n    try {\n      state.profileLoading = true\n      const address = profileAddress ?? state.address\n      const { id } = ClientCtrl.client().getDefaultChain()\n      if (address && id === 1) {\n        const [name, avatar] = await Promise.all([\n          ClientCtrl.client().fetchEnsName({ address, chainId: 1 }),\n          ClientCtrl.client().fetchEnsAvatar({ address, chainId: 1 })\n        ])\n        if (avatar) {\n          await preloadAvatarFn(avatar)\n        }\n        state.profileName = name\n        state.profileAvatar = avatar\n      }\n    } finally {\n      state.profileLoading = false\n    }\n  },\n\n  async fetchBalance(balanceAddress?: `0x${string}`) {\n    try {\n      state.balanceLoading = true\n      const address = balanceAddress ?? state.address\n      if (address) {\n        const balance = await ClientCtrl.client().fetchBalance({ address })\n        state.balance = { amount: balance.formatted, symbol: balance.symbol }\n      }\n    } finally {\n      state.balanceLoading = false\n    }\n  },\n\n  setAddress(address: AccountCtrlState['address']) {\n    state.address = address\n  },\n\n  setIsConnected(isConnected: AccountCtrlState['isConnected']) {\n    state.isConnected = isConnected\n  },\n\n  resetBalance() {\n    state.balance = undefined\n  },\n\n  resetAccount() {\n    state.address = undefined\n    state.isConnected = false\n    state.profileName = undefined\n    state.profileAvatar = undefined\n    state.balance = undefined\n  }\n}\n","import { proxy, subscribe as valtioSub } from 'valtio/vanilla'\nimport type { ConfigCtrlState } from '../types/controllerTypes'\nimport { ClientCtrl } from './ClientCtrl'\nimport { OptionsCtrl } from './OptionsCtrl'\n\nconst state = proxy<ConfigCtrlState>({\n  projectId: '',\n  mobileWallets: undefined,\n  desktopWallets: undefined,\n  walletImages: undefined,\n  chainImages: undefined,\n  tokenImages: undefined,\n  standaloneChains: undefined,\n  enableStandaloneMode: false,\n  enableNetworkView: false,\n  enableAccountView: true,\n  enableExplorer: true,\n  defaultChain: undefined,\n  explorerAllowList: undefined,\n  explorerDenyList: undefined,\n  termsOfServiceUrl: undefined,\n  privacyPolicyUrl: undefined\n})\n\n// -- controller --------------------------------------------------- //\nexport const ConfigCtrl = {\n  state,\n\n  subscribe(callback: (newState: ConfigCtrlState) => void) {\n    return valtioSub(state, () => callback(state))\n  },\n\n  setConfig(config: ConfigCtrlState) {\n    OptionsCtrl.setStandaloneChains(config.standaloneChains)\n    OptionsCtrl.setIsStandalone(\n      Boolean(config.standaloneChains?.length) || Boolean(config.enableStandaloneMode)\n    )\n    OptionsCtrl.setIsCustomMobile(Boolean(config.mobileWallets?.length))\n    OptionsCtrl.setIsCustomDesktop(Boolean(config.desktopWallets?.length))\n    OptionsCtrl.setWalletConnectVersion(config.walletConnectVersion ?? 1)\n\n    if (config.defaultChain) {\n      OptionsCtrl.setSelectedChain(config.defaultChain)\n    } else if (!OptionsCtrl.state.isStandalone) {\n      const chain = ClientCtrl.client().getDefaultChain()\n      OptionsCtrl.setSelectedChain(chain)\n    }\n\n    Object.assign(state, config)\n  }\n}\n","import type { ListingResponse, PageParams } from '../types/controllerTypes'\n\nconst EXPLORER_API = 'https://explorer-api.walletconnect.com'\n\nfunction formatParams(params: PageParams) {\n  const stringParams = Object.fromEntries(\n    Object.entries(params)\n      .filter(([_, value]) => typeof value !== 'undefined' && value !== null && value !== '')\n      .map(([key, value]) => [key, value.toString()])\n  )\n\n  return new URLSearchParams(stringParams).toString()\n}\n\nexport const ExplorerUtil = {\n  async fetchWallets(projectId: string, params: PageParams): Promise<ListingResponse> {\n    const urlParams = formatParams(params)\n    const fetcUrl = `${EXPLORER_API}/v3/wallets?projectId=${projectId}&${urlParams}`\n    const fetched = await fetch(fetcUrl)\n\n    return fetched.json()\n  },\n\n  formatImageUrl(projectId: string, imageId: string) {\n    return `${EXPLORER_API}/v3/logo/lg/${imageId}?projectId=${projectId}`\n  }\n}\n","import { proxy } from 'valtio/vanilla'\nimport type { ExplorerCtrlState, PageParams } from '../types/controllerTypes'\nimport { ExplorerUtil } from '../utils/ExplorerUtil'\nimport { ConfigCtrl } from './ConfigCtrl'\n\n// -- initial state ------------------------------------------------ //\nconst state = proxy<ExplorerCtrlState>({\n  wallets: { listings: [], total: 0, page: 1 },\n  search: { listings: [], total: 0, page: 1 },\n  previewWallets: [],\n  recomendedWallets: []\n})\n\n// -- helpers ------------------------------------------------------ //\nfunction getProjectId() {\n  const { projectId } = ConfigCtrl.state\n  if (!projectId) {\n    throw new Error('projectId is required to work with explorer api')\n  }\n\n  return projectId\n}\n\n// -- controller --------------------------------------------------- //\nexport const ExplorerCtrl = {\n  state,\n\n  async getPreviewWallets(params: PageParams) {\n    const { listings } = await ExplorerUtil.fetchWallets(getProjectId(), params)\n    state.previewWallets = Object.values(listings)\n\n    return state.previewWallets\n  },\n\n  async getRecomendedWallets() {\n    const { listings } = await ExplorerUtil.fetchWallets(getProjectId(), { page: 1, entries: 6 })\n    state.recomendedWallets = Object.values(listings)\n  },\n\n  async getPaginatedWallets(params: PageParams) {\n    const { page, search } = params\n    const { listings: listingsObj, total } = await ExplorerUtil.fetchWallets(getProjectId(), params)\n    const listings = Object.values(listingsObj)\n    const type = search ? 'search' : 'wallets'\n    state[type] = {\n      listings: [...state[type].listings, ...listings],\n      total,\n      page: page ?? 1\n    }\n\n    return { listings, total }\n  },\n\n  getImageUrl(imageId: string) {\n    return ExplorerUtil.formatImageUrl(getProjectId(), imageId)\n  },\n\n  resetSearch() {\n    state.search = { listings: [], total: 0, page: 1 }\n  }\n}\n","import { proxy, subscribe as valtioSub } from 'valtio/vanilla'\nimport type { RouterCtrlState } from '../types/controllerTypes'\n\n// -- initial state ------------------------------------------------ //\nconst state = proxy<RouterCtrlState>({\n  history: ['ConnectWallet'],\n  view: 'ConnectWallet',\n  data: undefined\n})\n\n// -- controller --------------------------------------------------- //\nexport const RouterCtrl = {\n  state,\n\n  subscribe(callback: (newState: RouterCtrlState) => void) {\n    return valtioSub(state, () => callback(state))\n  },\n\n  push(view: RouterCtrlState['view'], data?: RouterCtrlState['data']) {\n    if (view !== state.view) {\n      state.view = view\n      if (data) {\n        state.data = data\n      }\n      state.history.push(view)\n    }\n  },\n\n  replace(view: RouterCtrlState['view']) {\n    state.view = view\n    state.history = [view]\n  },\n\n  goBack() {\n    if (state.history.length > 1) {\n      state.history.pop()\n      const [last] = state.history.slice(-1)\n      state.view = last\n    }\n  }\n}\n","import { proxy, subscribe as valtioSub } from 'valtio/vanilla'\nimport type { ModalCtrlState } from '../types/controllerTypes'\nimport { AccountCtrl } from './AccountCtrl'\nimport { ConfigCtrl } from './ConfigCtrl'\nimport { OptionsCtrl } from './OptionsCtrl'\nimport { RouterCtrl } from './RouterCtrl'\n\n// -- types -------------------------------------------------------- //\nexport interface OpenOptions {\n  uri?: string\n  standaloneChains?: string[]\n  route?: 'Account' | 'ConnectWallet' | 'Help' | 'SelectNetwork'\n}\n\n// -- initial state ------------------------------------------------ //\nconst state = proxy<ModalCtrlState>({\n  open: false\n})\n\n// -- controller --------------------------------------------------- //\nexport const ModalCtrl = {\n  state,\n\n  subscribe(callback: (newState: ModalCtrlState) => void) {\n    return valtioSub(state, () => callback(state))\n  },\n\n  async open(options?: OpenOptions) {\n    return new Promise<void>(resolve => {\n      const { isStandalone, isUiLoaded, isDataLoaded } = OptionsCtrl.state\n      const { isConnected } = AccountCtrl.state\n      const { enableNetworkView } = ConfigCtrl.state\n\n      if (isStandalone) {\n        OptionsCtrl.setStandaloneUri(options?.uri)\n        OptionsCtrl.setStandaloneChains(options?.standaloneChains)\n        RouterCtrl.replace('ConnectWallet')\n      } else if (options?.route) {\n        RouterCtrl.replace(options.route)\n      } else if (isConnected) {\n        RouterCtrl.replace('Account')\n      } else if (enableNetworkView) {\n        RouterCtrl.replace('SelectNetwork')\n      } else {\n        RouterCtrl.replace('ConnectWallet')\n      }\n\n      // Open modal if essential async data is ready\n      if (isUiLoaded && isDataLoaded) {\n        state.open = true\n        resolve()\n      }\n      // Otherwise (slow network) re-attempt open checks\n      else {\n        const interval = setInterval(() => {\n          if (OptionsCtrl.state.isUiLoaded && OptionsCtrl.state.isDataLoaded) {\n            clearInterval(interval)\n            state.open = true\n            resolve()\n          }\n        }, 200)\n      }\n    })\n  },\n\n  close() {\n    state.open = false\n  }\n}\n","import { proxy, subscribe as valtioSub } from 'valtio/vanilla'\nimport type { ThemeCtrlState } from '../types/controllerTypes'\n\n// -- initial state ------------------------------------------------ //\nfunction isDarkMode() {\n  return typeof matchMedia !== 'undefined' && matchMedia('(prefers-color-scheme: dark)').matches\n}\n\nconst state = proxy<ThemeCtrlState>({\n  themeMode: isDarkMode() ? 'dark' : 'light'\n})\n\n// -- controller --------------------------------------------------- //\nexport const ThemeCtrl = {\n  state,\n\n  subscribe(callback: (newState: ThemeCtrlState) => void) {\n    return valtioSub(state, () => callback(state))\n  },\n\n  setThemeConfig(theme: ThemeCtrlState) {\n    Object.assign(state, theme)\n  }\n}\n","import { proxy, subscribe as valtioSub } from 'valtio/vanilla'\nimport type { ToastCtrlState } from '../types/controllerTypes'\n\n// -- initial state ------------------------------------------------ //\nconst state = proxy<ToastCtrlState>({\n  open: false,\n  message: '',\n  variant: 'success'\n})\n\n// -- controller --------------------------------------------------- //\nexport const ToastCtrl = {\n  state,\n\n  subscribe(callback: (newState: ToastCtrlState) => void) {\n    return valtioSub(state, () => callback(state))\n  },\n\n  openToast(message: ToastCtrlState['message'], variant: ToastCtrlState['variant']) {\n    state.open = true\n    state.message = message\n    state.variant = variant\n  },\n\n  closeToast() {\n    state.open = false\n  }\n}\n","export const CoreUtil = {\n  WALLETCONNECT_DEEPLINK_CHOICE: 'WALLETCONNECT_DEEPLINK_CHOICE',\n\n  isMobile() {\n    if (typeof window !== 'undefined') {\n      return Boolean(\n        window.matchMedia('(pointer:coarse)').matches ||\n          /Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)\n      )\n    }\n\n    return false\n  },\n\n  isAndroid() {\n    return CoreUtil.isMobile() && navigator.userAgent.toLowerCase().includes('android')\n  },\n\n  isEmptyObject(value: unknown) {\n    return (\n      Object.getPrototypeOf(value) === Object.prototype &&\n      Object.getOwnPropertyNames(value).length === 0 &&\n      Object.getOwnPropertySymbols(value).length === 0\n    )\n  },\n\n  isHttpUrl(url: string) {\n    return url.startsWith('http://') || url.startsWith('https://')\n  },\n\n  formatNativeUrl(appUrl: string, wcUri: string, name: string): string {\n    if (CoreUtil.isHttpUrl(appUrl)) {\n      return this.formatUniversalUrl(appUrl, wcUri, name)\n    }\n    let safeAppUrl = appUrl\n    if (!safeAppUrl.includes('://')) {\n      safeAppUrl = appUrl.replaceAll('/', '').replaceAll(':', '')\n      safeAppUrl = `${safeAppUrl}://`\n    }\n    this.setWalletConnectDeepLink(safeAppUrl, name)\n    const encodedWcUrl = encodeURIComponent(wcUri)\n\n    return `${safeAppUrl}wc?uri=${encodedWcUrl}`\n  },\n\n  formatUniversalUrl(appUrl: string, wcUri: string, name: string): string {\n    if (!CoreUtil.isHttpUrl(appUrl)) {\n      return this.formatNativeUrl(appUrl, wcUri, name)\n    }\n    let plainAppUrl = appUrl\n    if (appUrl.endsWith('/')) {\n      plainAppUrl = appUrl.slice(0, -1)\n    }\n    this.setWalletConnectDeepLink(plainAppUrl, name)\n    const encodedWcUrl = encodeURIComponent(wcUri)\n\n    return `${plainAppUrl}/wc?uri=${encodedWcUrl}`\n  },\n\n  async wait(miliseconds: number) {\n    return new Promise(resolve => {\n      setTimeout(resolve, miliseconds)\n    })\n  },\n\n  openHref(href: string, target: '_blank' | '_self') {\n    window.open(href, target, 'noreferrer noopener')\n  },\n\n  setWalletConnectDeepLink(href: string, name: string) {\n    localStorage.setItem(CoreUtil.WALLETCONNECT_DEEPLINK_CHOICE, JSON.stringify({ href, name }))\n  },\n\n  setWalletConnectAndroidDeepLink(wcUri: string) {\n    const [href] = wcUri.split('?')\n\n    localStorage.setItem(\n      CoreUtil.WALLETCONNECT_DEEPLINK_CHOICE,\n      JSON.stringify({ href, name: 'Android' })\n    )\n  },\n\n  removeWalletConnectDeepLink() {\n    localStorage.removeItem(CoreUtil.WALLETCONNECT_DEEPLINK_CHOICE)\n  },\n\n  isNull<T>(value: T | null): value is null {\n    return value === null\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unnecessary-condition */\nimport { Buffer } from 'buffer'\n\nif (typeof window !== 'undefined') {\n  if (!window.Buffer) {\n    window.Buffer = Buffer\n  }\n  if (!window.global) {\n    window.global = window\n  }\n  if (!window.process) {\n    // @ts-expect-error minimal process\n    window.process = { env: {} }\n  }\n}\n"],"names":["state","proxy","OptionsCtrl","callback","valtioSub","chains","standaloneChains","standaloneUri","selectedChain","ClientCtrl","isStandalone","isCustomDesktop","isCustomMobile","isDataLoaded","isUiLoaded","walletConnectVersion","ethereumClient","AccountCtrl","account","preloadAvatarFn","profileAddress","address","id","name","avatar","balanceAddress","balance","isConnected","ConfigCtrl","config","_a","_b","_c","_d","chain","EXPLORER_API","formatParams","params","stringParams","_","value","key","ExplorerUtil","projectId","urlParams","fetcUrl","imageId","getProjectId","ExplorerCtrl","listings","page","search","listingsObj","total","type","RouterCtrl","view","data","last","ModalCtrl","options","resolve","enableNetworkView","interval","isDarkMode","ThemeCtrl","theme","ToastCtrl","message","variant","CoreUtil","url","appUrl","wcUri","safeAppUrl","encodedWcUrl","plainAppUrl","miliseconds","href","target","Buffer"],"mappings":"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"}